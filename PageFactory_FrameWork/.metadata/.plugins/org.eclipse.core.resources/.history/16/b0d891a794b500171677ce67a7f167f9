package com.test.automation.uiAutomation.registerPage;

import org.testng.Assert;
import org.testng.Reporter;
import org.testng.SkipException;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import com.test.automation.uiAutomation.testBase.TestBase;
import com.test.automation.uiAutomation.uiActions.RegisterPage;

public class TC003_VerifyLoginWithDifferentCredentials extends TestBase {
	RegisterPage registerPage;

	public void log(String data) {
		log.info(data);
		Reporter.log(data);
	}
	
	@DataProvider(name="LoginData")
	public String[][] getLoginData(){
		String LoginData[][]=getData("TestData.xlsx", "loginTest");
		return LoginData;
	}
	
	
	@BeforeTest
	public void setup() {
		init();
	}

	@Test(dataProvider= "LoginData")
	public void verifyLoginWithInvalidCredentials(String emailAddress, String password, String runMode ) {
		registerPage = new RegisterPage(driver);
		log("----------------Starting Test TC003_VerifyLoginWithDifferentCredentials----------------");
		
		if (runMode.equalsIgnoreCase("n")){
			throw new SkipException("This data is marked as N. Hence skipping");
		}
		else{
			registerPage.loginToApplication(emailAddress, password);
			boolean status = registerPage.getLogoutLink();
			getScreenShot("TC003_"+emailAddress);
			Assert.assertEquals(status,true);
			
			if(status){
				registerPage.logOut();
			}
			
		}
		log("----------------Completed Test TC003_VerifyLoginWithDifferentCredentials----------------");
	}

	@AfterTest
	public void endTest() {
		end();
	}

}
